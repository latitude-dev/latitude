<script>
  import Clerk from '@clerk/clerk-js';
  import { PUBLIC_CLERK_API_KEY } from '$env/static/public';
  import { onMount } from 'svelte'

  let user

  onMount(() => {
    const clerk = new Clerk(PUBLIC_CLERK_KEY);
    await clerk.load();

    if (clerk.user) {
      user = clerk.user
    } else {
      clerk.redirectSignIn()
    }
  })
</script>

{#if user} 
  Welcome back, {user.fullName}! 
{:else} 
  Redirecting to sign in...
{/if}
