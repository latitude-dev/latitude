---
title: 'Materialized Queries'
description: 'Learn how to materialize queries'
---

## Introduction

Materialized queries feature allows you to persist queries from your sources / databases into files so later you can reference them in other queries.

You can use this feature for:
1. **Avoid calling your database**. Once a query is materialized it goes to a file and it will be used from there.
2. **Mix different sources**. For example you could have a Google Clould source and a MySQL source. If you have two queries that want to mix together, you can materialize them and then reference them in a new query.

## How It Works

When you materialize a query, the SQL code is saved into a file. To convert a querie in a materialized query, you have to set `materialize_query` config to `true` in the query configuration.

```sql queries/mysql/users.sql
{@config materialize_query = true}
SELECT * FROM users
```
<Note>Now users query will be materialized</Note>
Now you have to create a new source that will use the materialized query. And you have to install the materiaize connector.

```bash
npm install @latitude/materialized-connector
```

```yaml queries/materialized/source.yaml
type: materialized
```

Finally you can reference a materialized query like this
```sql queries/materialized/users.sql
SELECT * FROM {materializeRef('../mysql/users')}
```

## Materialize to materialize Queries?
To materialize your queries you have to run `materialize` command.

```bash
latitude materialize
```
<Note>You can materialize only a some queries by passing `--queries` argument and the path to the queries.</Note>

```bash
latitude materialize --queries mysql/users
```

## How to deploy materialized queries?
This can be done in different ways. In Latitude cloud materialization is not ready yet but when is finish it will be done automatically. We'll detect the queries that has the config `materialize_query` set to `true` and we'll materialize them.

If you're deploying you latitude project on your own server, you can use materialize command inside Dockerfile.

```Dockerfile
RUN latitude materialize
```


<Warning>Be aware that this will store all the queries marked as materializable in files inside your Docker image</Warning>
